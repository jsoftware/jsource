prolog './gdic2.ijs'
NB. addon/dictionary

dumpchk=: 4 : 0
echo x,':'
echo 'count: ', ":count__y''
(1) 16!:_7 dict__y
EMPTY
)

c1=: 9!:36 ''
9!:37[ 0 100000 0 100000

load 'dictionary'

cocurrent 'base'

echo params =: 'tree' ,&< ('initsize' ; 20) , ('keytype' ; 4) , ('valueshape' ; '') , ('keyshape' ; '') ,: ('valuetype' ; 4)
mydict =: params conew 'jdictionary'
dispnon0 =: echo @: ((0 0&(] {.~ [: >: 0 i:~ -:"1)))
0 put__mydict 100
dispnon0 ,"2 a. i. 0{::dict__mydict
(1) 16!:_7 dict__mydict

1 put__mydict 101
dispnon0 ,"2 a. i. 0{::dict__mydict
(1) 16!:_7 dict__mydict

2 put__mydict 102
dispnon0 ,"2 a. i. 0{::dict__mydict
(1) 16!:_7 dict__mydict

3 put__mydict 103
dispnon0 ,"2 a. i. 0{::dict__mydict
(1) 16!:_7 dict__mydict

4 put__mydict 104
dispnon0 ,"2 a. i. 0{::dict__mydict
(1) 16!:_7 dict__mydict

5 put__mydict 105
dispnon0 ,"2 a. i. 0{::dict__mydict
(1) 16!:_7 dict__mydict

coclass 'naivedictionary'

create=: {{
keys=: 0 $ a:
vals=: 0 $ a:
}}

destroy=: codestroy

has=: {{ keys e.~ < y }}

put=: {{
del y
keys=: keys , < y
vals=: vals , < x
EMPTY
}}

get=: {{ > vals {~ keys i. < y }}

del=: {{
idx=. keys i. < y
if. idx < # keys do.
  keys=: keys -. < y
  vals=: (idx {. vals) , (>: idx) }. vals
end.
assert. (# keys) -: # vals
EMPTY
}}

count=: {{ # keys }}

cocurrent 'base'

test_type=: {{)m
batchshape=. 5 25
keyshape=. 3 2
valshape=. 5 8
params=. y , <,. ('keytype' ; 'boolean') , ('keyshape' ; keyshape) ,: ('valueshape' ; valshape)
echo params
mydict=. params conew 'jdictionary'

naivedict=. '' conew 'naivedictionary'
keyrank=. # keyshape
valrank=. # valshape

assert. (count__mydict '') -: count__naivedict ''
NB. Put.
keys=. 5 25 3 2$1 0 1 0 0 1 1 1 0 0 0 1 0 0 0 0 1 0 1 0 0 0 0 1 1 1 1 1 0 0 1 1 0 1 1 1 0 0 1 0 0 0 1 0 0 0 0 1 0 1 0 0 1 1 0 0 0 0 1 0 0 0 1 0 1 0 1 1 0 0 0 0 1 0 0 1 1 0 0 1 1 0 1 1 1 0 1 1 0 0 1 0 0 0 1 1 0 1 1 0 0 0 1 1 0 0 1 1 0 1 1 1 1 1 1 1 1 0 1 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1 0 1 0 0 0 0 0 1 1 0 0 0 1 1 0 1 0 0 1 0 0 1 1 1 0 1 0 0 1 0 1 0 0 0 0 1 1 1 1 1 0 1 1 1 0 0 0 0 1 0 0 0 1 1 0 0 0 1 1 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 1 1 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 0 0 1 0 0 1 0 0 0 1 1 1 1 1 1 0 0 0 1 1 1 0 0 0 1 0 1 0 1 1 1 1 0 0 0 1 1 0 1 1 1 1 0 0 0 1 0 1 1 0 0 0 1 0 1 0 1 1 0 1 0 0 0 0 0 1 0 1 1 1 0 1 1 1 0 1 0 1 0 0 0 1 0 0 1 0 0 0 1 0 0 1 0 1 0 0 0 1 0 0 0 0 0 1 1 1 1 1 0 1 1 1 1 1 0 1 1 0 1 0 0 0 1 1 0 0 0 1 1 1 0 0 0 1 0 0 1 1 0 0 0 0 0 0 1 1 0 0 0 1 1 1 0 0 1 1 1 1 1 1 0 0 0 0 0 1 1 0 1 1 1 0 1 1 1 1 1 1 1 0 0 0 0 1 1 0 0 1 0 0 0 1 1 1 0 1 0 0 0 1 1 0 1 0 1 0 1 1 1 1 0 1 1 0 1 1 1 1 1 0 0 0 0 0 0 1 0 0 1 1 0 1 1 1 1 0 0 0 1 1 0 0 0 0 1 1 1 0 1 0 1 1 0 0 1 0 0 0 1 1 1 1 1 0 1 0 0 0 1 0 1 1 0 0 1 0 1 1 1 1 1 0 0 0 1 1 1 0 1 0 0 1 0 1 0 1 1 1 1 1 1 0 1 1 0 0 1 1 0 0 0 1 0 1 0 1 0 1 0 0 1 0 0 1 1 0 0 0 1 0 0 1 0 1 1 0 0 0 0 1 1 1 1 0 0 1 1 0 0 0 1 1 1 1 1 0 1 0 0 1 0 1 0 0 0 0 1 1 0 1 1 0 1 1 1 0 0 1 1 1 1 1 1 0 1 0 0 1 1 0 0 0 1 1 1 1 0 0 1 1 1 1 0 1 0 0 0 0 1 0 1 0 0 0 0 0 1 0 1 1 1 0 1 0 0 0 0 1 0 0 1 1 0 0 1 0 1 0 1 1 0 1 0 1 1 1 1 1 0 1 0 1 0 0 1 0 1 0 1 1 1 0 0 1 0 0 1 0 0 0 0 1 1 1 0 1 1 1 1 0 0 1 1 0 1 1 0 1 1 1 0 0 0 0 0 0 1 0 1 1 0 1 1 1 1 0 0 1 0 0 1 0 0 1 0 0 1 1
vals=. 5 25 5 8$1 3 2 2 2 2 3 2 1 3 2 3 1 1 3 2 3 2 2 1 3 2 1 1 1 3 3 1 2 2 1 2 2 3 3 1 1 2 1 2 2 2 2 2 1 1 2 3 2 2 3 2 3 2 3 3 3 1 3 2 2 3 2 3 3 2 1 3 2 3 3 2 1 1 2 2 3 1 3 3 2 2 3 2 1 1 1 2 1 1 1 1 3 3 3 1 1 2 3 2 3 2 3 1 1 3 2 3 1 1 3 1 1 2 2 2 3 2 3 1 2 3 2 1 3 2 3 3 2 1 3 2 2 2 3 1 1 2 1 1 1 2 3 2 1 2 1 1 3 3 3 1 1 3 3 3 3 1 1 3 2 3 3 1 2 3 3 1 2 3 1 2 2 2 3 1 3 3 3 3 3 2 1 1 2 2 3 1 3 3 3 2 2 2 2 1 2 2 3 2 3 2 2 1 3 3 2 1 3 2 3 3 2 1 1 3 3 2 3 1 1 1 3 1 2 2 2 1 3 1 1 3 1 3 1 3 2 3 2 2 1 1 3 1 2 2 3 1 2 3 3 1 1 2 3 2 2 1 3 3 3 2 2 1 1 3 1 2 2 1 2 1 2 1 1 3 2 2 3 2 1 1 3 3 3 3 1 3 1 2 1 1 1 3 3 2 3 2 1 1 2 3 2 3 3 3 3 3 3 3 3 1 3 3 1 1 3 3 2 3 2 3 1 2 3 3 1 1 1 1 1 1 3 1 3 1 2 1 2 2 1 3 2 1 3 3 3 2 1 1 3 2 2 3 2 3 3 3 1 2 2 2 1 3 2 3 2 3 3 3 2 1 3 3 2 1 3 1 3 1 1 2 2 2 2 1 3 1 2 1 3 3 2 1 1 2 2 1 2 1 1 3 3 1 2 2 3 2 1 3 2 3 3 2 1 1 2 1 2 1 2 1 3 3 2 2 1 2 1 1 1 3 1 1 2 2 1 2 1 3 1 3 1 1 2 3 2 3 3 3 2 1 3 2 1 2 2 2 2 3 1 2 3 2 3 2 2 3 3 1 3 2 2 3 3 3 3 3 3 3 1 1 1 1 3 2 3 1 1 2 2 2 1 3 1 2 1 2 2 2 3 2 2 1 2 2 2 1 3 2 1 2 1 1 1 1 1 3 3 3 3 3 1 1 3 1 3 2 3 1 3 2 1 3 2 3 1 1 3 2 1 2 2 2 3 3 3 2 2 2 3 2 3 1 1 2 3 2 2 1 2 3 3 3 1 2 1 3 2 2 2 1 3 1 3 3 2 2 3 1 1 2 3 1 3 2 1 1 3 3 1 3 3 2 3 3 3 2 3 2 3 1 2 3 2 1 1 3 3 3 2 3 3 1 2 3 2 2 2 3 1 3 2 1 2 2 3 1 1 3 3 1 3 3 1 2 2 2 2 3 3 1 2 2 2 1 3 2 1 1 1 3 2 1 3 1 2 3 2 2 2 1 1 1 1 3 1 2 3 1 3 1 2 1 2 3 1 3 2 1 2 2 3 1 3 1 1 2 2 1 2 1 2 3 3 2 3 2 1 2 2 3 3 2 1 2 1 1 3 3 1 3 3 2 3 3 1 2 2 3 1 2 1 1 2 2 1 2 3 1 3 2 1 2 3 3 2 2 2 3 3 3 2 1 2 2 1 1 1 3 1 3 3 1 3 1 2 1 3 2 2 3 1 2 1 2 1 1 3 2 2 3 3 3 3 2 3 1 3 1 1 2 2 3 2 1 2 1 3 1 3 1 1 2 2 3 2 3 1 1 1 3 1 2 3 3 3 2 2 2 2 2 3 1 1 1 1 2 3 1 2 3 1 2 3 3 1 3 2 1 3 3 2 2 3 3 1 2 3 3 1 2 2 1 1 1 3 3 3 2 3 2 1 2 1 2 3 1 3 3 1 2 2 2 2 1 1 1 2 1 1 3 1 1 3 1 2 2 3 2 2 2 3 2 3 3 2 2 1 2 1 1 1 1 1 2 3 1 3 2 1 3 3 3 3 3 1 1 3 3 2 3 3 2 2 1 2 2 1 1 2 1 1 1 2 2 2 2 1 2 2 2 3 1 3 2 1 1 1 1 3 2 1 1 1 3 1 2 1 3 1 1 2 1 1 2 2 3 1 3 3 3 2 2 1 2 1 3 2 3 2 2 3 1 3 3 3 3 3 2 3 1 3 1 1 1 3 2 2 3 2 3 3 3 3 2 1 3 1 3 1 2 3 2 2 1 3 2 1 3 1 3 1 3 3 2 1 2 2 1 1 2 2 1 2 2 1 2 3 2 2 2 2 1 2 3 1 1 3 1 2 3 1 1 2 3 1 3 3 3 3 1 1 1 2 3 1 1 3 3 1 3 1 1 1 1 1 3 2 1 1 1 3 3 3 3 1 1 3 2 2 3 2 1 1 2 1 1 2 1 3 3 3 1 1 2 1 1 2 3 1 2 1 3 1 1 3 2 2 3 2 2 2 2 2 3 3 2 1 3 3 1 1 3 3 1 2 3 2 2 1 1 2 2 3 1 1 2 1 3 3 2 2 1 2 1 3 2 1 3 2 1 2 1 2 2 2 1 2 2 3 1 1 1 2 2 2 3 3 2 3 1 1 2 2 1 2 3 1 1 1 1 2 1 3 3 2 1 2 3 2 2 1 1 2 1 2 3 3 2 2 1 3 3 2 2 3 3 2 3 1 3 1 1 1 1 3 2 3 2 2 2 2 3 3 2 1 2 3 2 2 3 3 1 2 3 1 2 2 3 3 2 1 3 3 3 3 2 2 1 2 2 3 3 1 3 3 3 1 1 1 1 3 2 3 2 3 2 1 2 3 2 1 1 1 3 2 3 2 3 2 3 2 3 3 1 3 3 1 3 1 2 2 2 3 3 3 2 1 3 3 3 2 1 1 1 3 3 2 2 2 2 3 2 1 2 1 1 2 2 2 1 1 2 2 2 2 2 2 1 3 1 1 1 2 1 1 1 3 3 2 2 2 1 3 2 2 1 3 3 3 2 3 2 1 1 1 2 3 1 2 1 3 2 3 2 2 1 1 2 2 1 1 2 3 2 3 3 1 1 3 2 3 3 1 3 1 1 2 3 2 2 2 3 2 2 1 3 3 1 1 1 1 2 3 2 2 1 3 3 3 3 1 3 2 3 1 3 2 1 2 1 1 2 2 2 2 2 2 2 1 1 3 2 3 2 1 3 3 1 2 3 1 2 1 3 1 2 2 3 2 1 3 1 1 2 1 2 1 2 2 2 1 1 3 1 1 1 1 3 2 3 2 1 3 3 1 3 3 2 3 3 1 1 2 1 2 3 2 3 2 1 1 3 2 1 1 1 1 2 3 3 1 3 2 1 1 2 3 1 2 2 3 1 3 1 2 3 2 1 3 3 3 2 3 3 1 1 3 2 1 1 2 3 2 2 2 2 3 1 2 2 3 1 3 3 1 1 1 2 3 3 3 1 1 2 2 1 1 3 2 2 1 3 2 2 3 3 2 1 1 1 1 3 1 2 1 1 1 1 1 3 3 1 2 3 2 3 1 2 1 3 3 2 2 2 3 2 3 2 1 1 2 2 3 2 1 3 1 3 3 3 2 2 3 2 1 3 1 2 3 1 1 2 3 1 1 1 1 2 2 1 2 1 3 3 3 2 1 1 3 1 3 1 3 3 2 3 1 2 1 2 2 1 3 2 2 2 2 1 1 1 1 2 2 2 3 2 3 1 2 2 3 2 3 2 3 1 1 1 3 2 1 1 2 2 1 3 1 3 2 2 2 1 1 3 2 3 3 2 1 2 3 1 3 2 2 2 3 1 2 1 2 3 1 3 1 1 3 3 3 3 2 3 3 1 3 3 3 1 3 3 3 3 2 2 2 3 2 2 2 3 1 3 3 1 2 2 1 3 3 2 1 3 3 1 1 2 3 3 3 2 1 1 1 1 2 2 3 3 3 3 3 2 1 1 1 2 3 1 2 1 1 1 1 2 1 1 2 3 2 3 2 1 2 2 1 2 2 3 1 1 3 3 1 1 2 3 2 3 2 2 1 3 3 2 1 1 1 2 1 3 1 1 3 2 3 1 2 1 1 3 1 1 1 1 2 1 1 2 2 1 1 1 3 3 3 2 2 3 2 3 1 2 3 3 2 3 2 2 3 3 1 1 2 1 2 3 2 1 3 3 1 1 1 3 2 1 2 2 2 3 2 3 3 3 3 3 3 1 3 2 3 1 3 3 3 1 1 2 2 2 2 3 2 3 3 1 2 2 2 1 1 1 3 3 3 3 1 3 3 1 2 2 2 2 2 2 2 3 2 2 3 3 1 2 1 2 2 2 1 1 3 3 2 2 1 1 1 2 1 3 3 1 3 1 3 1 2 3 3 2 1 3 3 3 3 1 2 2 1 1 1 1 1 1 2 1 3 3 3 2 1 1 1 1 2 1 3 2 2 2 1 3 3 1 3 3 2 3 1 3 1 3 3 2 2 1 1 3 3 3 2 1 2 1 1 3 2 3 1 3 3 2 2 2 1 2 2 3 2 2 3 2 3 3 1 1 2 1 2 2 2 2 3 2 2 2 2 2 1 1 2 2 3 1 3 2 1 1 3 3 3 2 3 2 2 3 2 2 2 2 2 3 2 2 2 2 3 1 2 3 3 2 2 2 1 3 1 3 1 3 2 2 1 2 2 3 3 3 2 2 3 2 3 3 2 2 1 3 1 2 1 1 1 2 3 1 2 1 2 1 3 2 1 1 3 3 3 1 3 2 1 2 1 2 2 3 1 3 3 1 2 3 2 3 2 3 1 1 2 1 2 1 2 3 2 3 1 3 2 3 2 1 3 3 2 1 1 1 1 1 3 3 2 2 2 1 1 3 1 2 3 2 3 2 3 1 1 2 1 3 3 2 2 3 3 1 1 1 1 1 1 3 3 3 1 1 3 3 1 2 2 1 2 2 1 3 1 3 3 2 3 3 3 2 1 3 3 3 1 1 2 3 1 2 3 2 1 1 2 1 2 2 3 3 3 3 3 3 3 2 2 1 3 1 1 1 2 3 3 2 2 2 1 2 3 2 1 1 1 3 1 1 3 2 2 1 2 1 1 1 1 3 3 1 1 1 3 3 1 1 1 2 2 1 2 1 1 3 1 2 2 2 3 2 2 1 1 2 2 2 2 1 1 3 2 1 2 2 3 3 2 1 3 1 3 1 2 3 3 3 1 3 3 1 2 2 3 3 3 2 3 1 3 3 2 3 1 1 3 2 1 2 3 2 3 2 1 3 3 1 1 2 3 2 2 1 1 2 1 2 2 2 3 1 3 3 3 3 3 1 2 1 2 1 3 3 1 2 2 2 1 3 1 1 3 1 1 2 3 1 1 1 3 2 3 2 1 1 2 1 1 2 2 1 2 3 2 1 2 1 3 3 1 1 1 3 2 3 1 1 1 3 3 1 3 3 1 1 1 3 1 3 1 2 1 1 1 1 3 1 1 3 2 2 1 1 1 3 1 3 2 3 1 2 3 2 2 2 1 2 1 3 3 3 1 2 2 1 1 2 1 1 2 1 1 3 2 3 2 3 1 1 3 3 1 3 1 1 2 3 3 2 2 3 2 3 1 3 3 3 3 1 2 3 3 3 1 3 1 2 3 1 3 2 2 1 1 3 1 1 3 2 2 1 3 2 2 3 3 2 1 1 2 3 3 1 2 3 1 1 3 2 2 1 3 3 2 1 1 1 1 3 2 3 1 2 2 3 1 2 2 3 3 1 1 3 3 1 1 3 3 2 3 3 2 3 1 1 1 1 3 1 2 1 2 2 2 2 1 2 1 2 1 1 3 1 2 2 3 1 1 3 3 2 1 1 1 3 2 3 3 3 3 3 3 2 1 3 2 1 1 1 1 3 1 1 2 1 2 3 2 3 3 1 3 3 2 3 2 1 3 1 3 1 3 2 3 2 2 1 2 2 3 1 2 1 2 1 3 1 2 3 1 3 3 2 3 2 1 2 1 3 3 3 1 1 2 2 2 1 3 3 1 2 2 3 2 1 3 2 1 3 1 2 2 1 3 1 2 1 3 3 2 3 2 2 2 3 2 1 3 1 2 1 2 3 2 3 1 2 3 3 2 3 3 2 2 1 2 3 3 2 3 1 3 3 3 1 2 3 3 1 3 3 1 1 3 3 1 1 1 2 1 2 3 1 1 2 2 1 1 2 1 1 2 3 1 2 2 1 1 2 2 3 1 2 3 3 3 3 2 2 1 2 2 2 1 1 1 1 3 3 1 1 2 1 2 3 1 2 2 2 2 1 2 3 3 1 2 3 3 3 3 3 3 2 2 3 3 1 1 3 2 1 1 3 3 3 3 3 1 3 2 3 1 3 3 1 2 1 3 1 2 2 3 3 2 1 2 1 1 1 2 1 3 1 1 1 3 2 3 1 2 3 2 2 2 2 3 2 2 3 2 2 1 1 1 3 3 2 2 2 1 1 3 3 2 2 3 3 3 2 1 3 3 1 2 1 2 2 2 2 1 2 3 3 3 1 2 1 1 2 2 2 1 1 3 2 2 3 3 1 2 2 3 1 1 1 3 1 1 1 1 1 1 2 3 1 2 1 1 1 1 3 3 1 3 3 3 3 3 2 3 2 2 1 2 1 3 1 2 2 1 2 3 1 1 3 2 2 3 2 2 2 2 1 3 1 3 2 1 3 1 1 2 1 3 1 1 1 2 1 2 3 2 3 2 3 3 1 3 2 1 1 3 1 3 1 3 2 1 3 1 2 3 1 2 2 2 2 1 3 3 1 1 1 2 2 2 2 1 2 1 1 1 3 3 1 3 2 3 3 2 1 2 1 2 3 2 2 3 1 1 2 3 1 3 2 2 3 1 2 3 2 1 1 2 2 1 3 1 3 2 1 1 3 1 2 1 3 2 2 3 1 2 3 1 1 3 2 2 3 2 2 1 1 3 2 2 3 1 3 3 2 2 3 1 3 3 2 2 3 2 2 2 3 3 1 2 1 3 1 2 2 2 2 3 2 2 2 2 1 1 3 1 1 1 2 2 2 1 1 1 3 3 3 2 1 3 1 2 1 1 1 1 3 2 2 2 2 1 2 1 1 2 2 2 3 1 1 3 1 1 1 2 1 1 2 2 1 3 2 1 3 1 1 1 2 1 1 3 1 3 3 2 2 3 3 3 3 2 1 1 2 2 2 3 2 1 3 2 2 2 1 2 3 2 1 2 2 3 3 1 2 2 1 1 3 2 2 2 3 3 2 3 3 1 3 2 1 2 3 1 1 2 3 2 1 2 1 3 3 1 3 3 3 2 3 2 1 2 2 3 2 1 3 1 2 3 1 1 1 3 2 2 3 2 1 1 1 2 2 1 3 2 1 2 2 3 3 3 3 1 2 1 2 2 3 3 1 3 1 1 3 3 3 3 3 1 3 3 1 2 3 1 3 3 3 2 1 1 1 1 1 1 3 1 2 2 1 2 3 3 1 1 1 3 1 2 2 3 3 2 3 1 1 3 1 3 3 2 2 1 1 2 3 2 3 2 1 3 2 2 3 1 3 2 2 2 3 1 3 3 3 2 2 1 2 1 1 3 3 2 1 1 1 2 3 1 2 2 2 3 3 3 3 2 2 3 3 1 2 2 2 2 1 2 1 3 3 2 3 1 2 1 3 3 1 3 3 3 2 3 2 1 3 2 2 1 3 3 3 1 1 3 3 1 2 2 1 1 1 3 2 3 2 3 1 1 1 1 2 1 3 1 3 1 1 2 2 2 3 1 2 2 1 1 3 1 2 2 3 3 3 1 2 1 2 3 2 2 3 3 2 1 3 1 1 2 2 2 1 1 1 1 3 3 2 2 2 1 2 1 3 2 3 3 1 2 2 2 2 2 3 3 1 3 1 1 3 3 2 1 3 2 3 2 3 2 1 3 1 1 3 2 3 2 1 1 2 2 1 1 2 1 3 2 2 2 2 2 2 3 2 2 3 1 1 2 1 2 2 3 1 3 1 1 3 3 3 3 2 3 1 2 3 2 1 1 3 1 1 2 3 2 1 1 1 3 2 3 2 1 2 2 1 1 3 2 1 3 1 1 2 2 2 2 2 1 3 3 3 1 1 3 1 2 2 2 3 2 3 1 2 3 1 2 3 1 1 1 1 3 3 1 3 1 1 2 2 1 3 1 1 3 2 1 1 1 3 3 2 2 1 2 1 2 1 1 3 2 2 1 2 2 1 3 3 2 1 3 2 2 1 1 1 3 1 3 1 3 2 1 1 1 2 1 1 1 2 1 3 2 1 1 2 3 1 1 2 1 1 2 3 1 3 3 2 1 2 1 3 2 2 1 1 2 2 1 3 2 2 3 3 1 2 1 3 2 1 2 2 1 2 2 2 1 3 1 1 1 1 3 2 2 1 2 2 1 3 1 1 2 3 1 3 3 3 3 2 2 1 1 3 3 1 1 3 3 1 2 1 2 3 1 1 2 3 1 1 2 3 2 1 3 3 2 3 1 3 2 1 1 2 3 1 3 2 2 3 3 2 2 3 3 2 1 1 3 3 3 3 2 1 1 2 3 2 3 2 3 1 2 1 1 3 2 2 1 3 2 1 2 2 1 2 2 3 3 2 3 3 2 2 2 3 2 2 3 1 2 1 1 1 2 2 2 1 3 3 3 2 3 2 2 1 1 3 2 2 2 3 2 1 1 1 3 1 3 3 2 2 1 3 1 2 3 1 1 3 2 1 2 1 3 3 2 2 1 3 2 2 3 1 1 1 2 3 1 2 2 2 2 3 1 1 3 3 3 3 2 2 2 1 1 2 2 2 1 1 1 2 1 3 2 3 1 2 3 3 1 2 3 1 1 3 1 3 3 1 2 2 1 2 2 3 2 3 3 3 2 1 2 1 1 2 2 2 3 3 3 1 2 3 3 2 3 2 1 3 3 2 1 1 1 3 3 1 2 3 1 1 2 3 2 1 3 2 2 1 3 1 2 3 1 1 1 2 3 2 2 2 2 2 1 3 1 3 3 1 3 1 3 2 3 1 2 1 1 1 2 1 3 2 3 3 1 2 3 3 1 2 3 1 1 1 3 3 2 1 1 2 2 2 2 2 3 1 3 3 3 2 3 2 3 2 3 3 2 2 1 2 3 2 3 2 1 1 2 3 3 1 3 3 2 1 1 1 2 3 2 1 2 3 2 1 1 3 1 3 2 2 1 1 2 3 3 3 3 2 3 2 3 2 3 1 1 2 3 3 2 1 1 1 2 1 1 3 2 1 3 3 2 3 3 1 1 1 2 2 3 1 3 1 2 3 1 3 3 2 2 2 3 1 3 1 3 1 2 2 2 1 3 3 3 3 1 2 1 2 3 1 2 3 3 1 1 1 1 2 2 2 3 1 3 3 2 2 2 3 3 2 2 2 3 1 1 3 2 3 3 1 3 1 3 3 2 1 3 2 2 3 2 3 3 3 3 1 3 1 2 3 2 1 2 2 3 3 1 3 1 1 1 1 2 1 3 1 1 1 2 1 3 2 1 3 3 3 1 3 2 1 3 3 1 2 3 1 2 1 3 3 2 2 3 3 2 2 1 1 1 2 1 2 2 2 2 2 1 3 1 3 2 1 1 1 1 2 1 3 1 1 3 3 3 3 1 3 2 1 1 3 3 1 2 1 2 2 1 3 2 1 2 1 2 2 2 2 1 1 3 1 3 3 2 1 2 1 3 3 3 2 2 1 3 3 1 3 3 2 3 1 3 2 2 3 3 1 1 1 1 2 3 3 3 2 1 2 3 3 1 3 3 2 1 1 2 3 3 2 3 1 3 1 3 1 2 3 3 1 1 1 1 1 1 2 3 1 3 1 3 1 3 3 3 2 1 1 1 1 3 2 3 1 2 1 3 1 2 2 2 1 2 3 3 1 2 2 2 1 1 2 1 3 2 2 3 3 3 1 2 3 1 2 2 2 1 3 2 3 2 1 2 1 1 2 3 3 3 3 3 2 3 1 2 2 2 3 2 3 1 2 1 3 3 1 2 3 3 3 1 1 2 1 3 2 1 1 2 2 1 2 2 3 1 3 3 2 1 2 1 2 1 2 1 3 2 2 2 2 3 3 3 2 3 2 2 3 2 1 3 3 3 3 2 1 1 2 1 3 3 1 2 2 3 1 2 3 2 3 3 1 3 2 2 2 1 2 2 1 1 3 1 1 2 3 2 2 2 3 2 3 1 1 2 3 2 1 3 3 1 2 3 2 3 2 2 1 2 2 3 3 3 2 3 3 3 2 1 1 3 1 2 3 2 3 1 3 2 3 2 3 1 1 3 3 1 1 1 2 2 2 3 3 2 2 2 2 3 3 3 1 2 2 3 3 1 1 2 3 2 2 1 2 1 3 2 1 2 2 2 2 2 1 3 1 3 2 3 1 2 3 2 1 2 1 1 1 1 1 2 2 2 2 3 2 1 3 1 1 1 3 3 3 3 1 1 2 1 2 1 1 1 2 2 2 2 2 2 1 3 2 2 3 1 1 1 1 3 2 2 3 1 3 2 3 1 3 1 1 3 2 1 3 3 1 1 1 2 2 3 2 2 1 1 1 1 3 1 1 3 2 3 1 1 1 1 3 3 1 3 3 2 1 2 2 1 2 3 2 2 3 3 2 1 3 1 3 3 2 2 1 3 3 2 1 3 2 1 3 1 1 1 1 1 3 1 2 1 2 2 1 2 1 2 3 2 3 2 3 1 2 2 1 1 3 1 2 3 3 1 1 1 2 2 1 2 1 2 3 1 1 3 1 2 3 2 1 1 1 2 1 1 2 3 2 3 3 3 2 2 3 3 1 3 1 2 2 1 3 1 3 2 1 1 2 2 2 3 2 2 1 3 3 1 1 2 1 1 2 3 2 2 2 2 2 1 1 3 2 2 3 3 1 3 3 1 1 2 1 1 2 2 3 3 3 1 1 3 2 3 2 2 2 3 3 3 2 1 2 1 1 1 1 2 1 3 3 1 1 1 2 3 1 3 3 3 3 3 3 1 2 3 3 1 1 3 2 1 3 2 3 3 1 3 1 2 3 3 3 1 3 2 3 1 2 3 2 1 2 2 1 1 2 1 3 2 1 2 2 2 3 1 2 3 3 1 2 3 3 1 3 3 3 2 1 3 2 1 2 1 3 1 3 3 1 1 3 3 3 3 1 2 3 3 2 1 3
echo 'put'
vals put__naivedict"(valrank , keyrank) keys
assert. EMPTY -: vals put__mydict keys
'put'dumpchk mydict
assert. (count__mydict '') -: count__naivedict ''
NB. Get.
keys=. 5 25 3 2$1 0 0 0 0 1 0 0 0 0 1 0 1 0 0 0 1 1 1 0 0 1 0 1 0 1 0 1 0 0 1 1 0 0 0 1 1 0 0 0 1 1 0 0 1 0 0 0 1 0 1 1 0 1 0 0 0 0 0 0 0 1 0 1 1 1 0 0 0 0 0 1 0 1 1 1 1 1 1 1 1 0 1 1 1 1 0 1 0 1 0 1 1 1 1 1 1 1 0 1 0 1 0 0 1 0 0 0 1 1 0 1 1 1 1 0 1 0 0 0 0 1 1 1 1 1 0 0 1 1 1 1 1 0 1 1 1 0 0 0 0 0 1 1 1 1 0 0 0 0 1 0 0 0 0 0 0 1 0 0 1 0 1 0 0 1 0 0 1 0 0 1 0 1 0 1 1 1 1 1 0 1 1 1 0 1 1 0 0 1 0 0 0 1 0 1 0 0 0 0 0 1 0 0 1 1 0 0 0 1 1 1 0 1 0 1 1 0 0 0 0 1 0 1 0 0 0 0 0 0 1 1 1 1 0 0 1 0 1 0 0 0 1 1 1 0 1 0 1 0 1 0 1 1 0 0 1 1 0 1 1 0 1 1 0 1 0 1 0 1 1 1 0 0 0 0 1 0 0 0 0 0 0 0 0 1 1 0 1 0 1 0 0 1 1 0 0 0 0 1 1 0 0 1 1 1 1 0 1 0 0 1 1 0 0 1 1 0 1 0 0 1 0 1 1 0 0 1 0 1 0 1 1 1 1 0 1 0 1 0 1 1 1 1 1 0 0 1 0 1 0 1 1 1 1 0 1 0 1 0 1 0 1 0 1 1 0 0 0 0 1 1 1 0 0 0 1 0 1 0 1 0 0 1 1 1 1 1 1 1 1 0 1 0 1 1 1 1 1 1 1 0 0 0 1 1 1 0 1 0 1 0 1 1 0 0 1 1 0 1 0 1 0 0 0 0 1 1 1 0 0 1 1 0 0 1 1 0 0 0 0 0 1 1 0 0 0 1 1 1 0 1 0 1 0 1 1 0 0 0 0 0 0 0 0 1 1 1 0 1 0 0 1 0 1 0 1 1 1 0 1 1 0 1 0 1 0 1 0 1 1 1 0 1 1 1 0 0 1 1 0 1 1 0 1 0 1 1 1 0 1 0 0 0 0 1 1 1 1 1 1 1 1 0 1 0 0 1 0 1 0 1 1 0 1 0 0 0 1 1 0 1 1 1 0 1 0 1 1 0 0 0 1 0 1 1 1 0 0 1 0 0 1 0 0 1 1 1 1 1 0 0 1 0 0 0 0 0 0 1 0 1 0 1 1 0 0 0 0 1 1 1 0 0 0 1 0 0 0 0 0 0 1 1 1 0 1 0 0 1 1 1 1 0 1 1 1 1 1 0 1 1 1 1 0 1 1 0 0 0 1 0 1 0 1 1 0 0 1 1 1 1 1 1 1 0 0 0 1 1 1 1 0 1 0 0 0 0 1 0 1 0 1 0 0 1 1 1 1 0 1 0 1 1 1 1 1 0 1 0 0 1 1 0 1 0 0 0 1 0 1 0 1 1 0 1 1 0 1 0 0 0 0 1 0 1 0 0 1 1 1 1 1 1 0 1 0 1 1 0 0 0 1 1 1 0 0 1 1 0 1 1 0 1 0 0 0 1 0 0 0 1 1 0 0 1 0 1 1 1
vals=. 5 25 5 8$1 1 1 2 1 1 1 1 1 3 2 2 1 1 1 2 1 3 3 1 3 2 1 1 2 1 1 1 1 2 1 2 3 1 2 2 2 3 2 1 1 1 2 3 2 2 1 3 1 2 1 3 1 2 2 1 2 2 1 2 2 3 2 2 1 1 3 3 2 3 1 2 2 1 1 1 1 3 2 3 2 1 2 2 3 2 1 2 2 2 3 2 2 1 2 1 3 1 1 1 1 3 1 3 1 3 3 1 1 2 2 3 3 3 3 2 2 2 3 2 3 2 1 2 2 1 1 1 2 1 1 2 1 2 2 2 1 3 1 1 3 2 3 1 1 1 1 3 2 2 1 1 3 1 3 3 2 3 3 3 3 3 2 1 2 2 1 2 2 2 1 3 2 3 2 3 3 2 3 3 3 3 2 1 2 3 1 2 2 2 2 3 2 1 3 3 2 3 3 3 3 1 1 2 3 2 1 3 2 1 3 3 3 2 2 3 3 1 1 3 2 1 2 3 1 2 3 1 3 2 1 2 3 2 2 2 3 3 3 3 1 1 1 2 2 2 1 3 1 2 1 1 2 1 3 3 3 1 2 2 2 2 2 3 1 3 3 1 3 2 3 1 1 2 3 3 3 1 3 1 3 1 2 1 2 2 3 2 2 2 1 1 3 3 1 3 1 1 2 1 2 3 3 3 3 2 1 3 1 2 2 1 2 2 2 1 2 3 2 2 3 3 3 3 3 3 2 1 3 2 3 1 2 3 3 1 3 3 2 3 3 3 2 3 2 2 3 2 1 2 1 2 3 3 3 3 2 1 1 3 2 3 2 2 3 2 3 2 3 3 3 3 1 3 2 3 2 2 1 2 2 3 1 3 3 3 1 2 1 2 3 3 3 1 1 2 3 3 3 3 1 3 3 2 2 1 2 3 2 1 1 2 1 1 2 1 3 1 3 2 2 1 2 1 1 3 1 3 2 1 2 3 3 2 1 1 3 2 1 2 1 2 1 1 1 1 3 3 2 2 2 1 3 1 2 3 3 1 3 1 3 1 1 2 3 2 1 2 3 1 3 1 3 2 2 3 1 2 2 3 2 1 3 3 2 2 2 3 1 1 2 1 3 1 1 1 2 1 2 2 3 2 1 2 1 1 2 2 2 3 3 2 2 3 1 3 3 1 1 1 2 2 3 1 3 1 3 3 1 2 2 2 3 1 3 1 1 2 2 2 3 1 2 1 2 2 3 1 2 2 3 1 3 3 1 1 1 1 3 1 2 3 3 3 3 3 2 2 2 2 3 2 3 3 2 2 1 3 3 1 3 1 3 1 2 1 3 2 1 1 3 2 1 3 1 2 2 1 1 2 2 1 3 1 1 1 1 2 3 1 1 1 3 1 3 1 3 1 1 1 2 1 3 2 1 1 1 3 2 2 2 2 1 3 3 3 2 1 2 3 1 3 3 3 3 3 1 3 1 2 3 3 1 2 1 1 2 3 2 1 2 2 1 3 1 3 2 3 1 2 1 2 2 3 1 3 1 3 1 2 3 2 2 3 3 2 1 3 1 2 1 2 1 2 3 3 2 1 2 1 1 2 2 1 2 3 1 1 2 2 2 1 1 3 1 1 2 3 3 1 3 1 1 1 3 2 1 3 1 2 3 1 2 3 1 3 2 1 2 3 2 1 1 3 2 2 3 3 1 2 3 1 2 1 1 2 1 3 2 1 3 1 3 3 3 1 2 3 2 2 3 3 3 3 3 2 2 2 3 2 3 3 3 3 1 3 3 2 2 2 2 2 1 1 1 2 1 3 2 2 3 1 1 2 1 3 1 2 2 2 2 3 1 1 2 3 2 2 3 1 2 1 3 1 1 1 3 3 3 2 1 3 1 2 2 2 1 3 1 2 3 3 1 2 2 2 1 3 2 2 3 1 2 3 3 3 3 2 3 2 1 2 3 1 3 2 3 2 2 1 2 1 2 1 1 3 3 2 3 2 2 1 1 3 1 2 1 2 3 3 2 1 1 2 3 1 1 2 2 3 3 2 1 2 1 2 1 1 1 2 2 2 2 1 1 2 1 1 2 1 2 1 1 3 2 3 1 3 3 2 2 3 2 3 2 2 3 1 2 1 2 2 2 1 1 3 3 1 2 2 3 2 1 3 1 2 1 1 1 2 1 2 1 2 3 2 2 1 1 1 1 3 1 2 2 3 1 2 3 2 2 1 2 2 3 3 1 2 1 3 1 2 3 1 2 1 2 2 1 2 2 2 2 3 1 3 2 2 1 3 1 3 3 2 1 3 1 2 2 2 3 2 2 1 2 2 2 1 1 2 1 3 2 1 2 2 3 3 3 3 2 1 1 3 1 2 3 1 2 1 1 2 1 3 2 3 2 2 1 2 3 2 3 3 3 2 2 2 3 2 2 2 1 2 1 3 3 2 1 3 2 3 3 2 2 3 2 1 1 1 2 1 3 2 1 2 3 2 1 2 2 3 3 1 1 1 3 3 3 3 1 1 2 3 3 1 3 2 3 1 3 3 2 2 3 1 3 2 2 2 3 3 1 1 3 3 1 1 3 1 3 1 1 2 3 1 3 1 2 2 1 3 3 2 3 2 3 2 1 1 2 3 3 2 3 1 2 3 1 3 3 2 3 3 2 2 3 3 1 1 1 3 1 1 3 1 2 3 2 1 1 3 1 3 2 2 3 2 3 1 1 3 2 1 1 3 3 3 1 3 1 1 2 2 3 1 3 3 2 3 2 3 2 3 2 2 1 1 1 1 1 2 1 2 3 2 3 1 1 2 3 3 3 3 1 2 1 1 2 2 2 3 2 3 1 2 2 2 2 2 2 2 3 3 3 1 2 1 1 2 1 3 3 2 1 3 2 3 3 2 3 1 3 3 3 3 1 3 2 2 2 3 1 1 2 3 1 2 1 2 3 1 1 2 1 1 1 1 1 1 2 3 2 2 3 2 1 3 1 2 3 2 2 3 2 1 3 3 3 3 2 1 3 3 3 1 2 1 2 2 1 3 1 1 2 2 3 2 3 3 3 3 1 3 1 2 1 2 1 2 1 2 2 2 3 3 2 3 1 1 2 2 3 3 2 2 3 2 2 1 1 3 2 2 2 2 1 3 1 2 2 1 2 1 3 3 3 3 1 1 1 3 2 2 2 2 2 1 1 1 3 3 3 2 2 3 1 2 2 2 2 2 1 1 1 2 2 1 2 1 1 2 2 1 1 3 2 3 1 3 3 1 3 1 1 3 3 3 1 3 3 2 1 1 3 2 1 3 3 2 3 1 3 3 1 1 1 2 1 2 2 1 2 2 3 1 2 1 1 3 3 2 2 2 1 3 1 1 1 1 3 2 1 2 3 1 1 1 2 2 3 3 3 1 3 1 1 3 1 3 3 3 1 3 2 3 2 2 2 1 3 2 1 2 3 1 2 2 2 2 3 1 1 1 1 2 2 1 1 1 2 3 1 3 2 2 2 2 1 2 1 3 3 1 1 3 1 3 1 2 2 2 2 2 3 3 3 2 1 3 2 2 2 2 3 3 2 3 3 2 2 1 1 2 3 1 2 2 1 2 2 2 3 1 1 1 2 1 1 1 3 3 2 3 1 2 2 3 2 1 3 2 3 3 1 1 1 1 1 2 3 1 1 1 2 1 2 3 2 2 3 2 3 2 1 3 1 3 3 1 2 1 3 1 2 3 3 2 2 2 2 2 3 2 2 3 1 1 3 2 2 1 2 3 1 2 3 2 1 2 3 1 3 1 2 3 3 1 2 3 3 3 1 3 3 2 2 2 1 2 1 2 3 3 3 3 3 1 2 3 1 2 3 1 2 3 3 2 3 3 2 3 3 2 1 2 3 1 2 1 3 1 2 2 3 3 2 2 3 3 3 1 3 1 3 2 1 3 2 3 2 3 3 2 1 3 2 2 1 2 1 2 3 2 3 1 3 3 3 3 3 3 2 3 3 2 3 1 1 1 1 1 3 3 2 3 3 3 2 1 1 3 3 3 3 1 3 3 1 1 1 3 3 3 1 2 1 2 3 3 3 2 2 2 3 1 2 1 3 1 3 2 1 3 2 1 3 3 1 3 3 1 2 3 1 3 1 1 1 1 3 1 3 1 2 2 3 2 2 2 1 3 1 1 2 1 2 2 2 1 3 2 3 1 1 2 1 1 2 2 3 3 1 3 1 1 1 3 1 2 3 2 3 2 1 2 1 2 1 2 2 2 3 2 2 1 3 1 3 3 1 2 2 3 2 2 3 2 1 3 2 2 3 2 1 1 1 3 2 2 3 2 2 1 1 2 3 3 2 1 1 2 1 3 3 3 3 1 2 2 2 3 1 3 3 1 3 3 1 2 2 2 3 1 1 3 2 1 1 3 3 1 2 2 1 1 3 2 3 2 1 1 2 3 2 3 2 3 2 1 1 2 2 2 3 1 1 2 1 1 3 3 2 3 3 1 2 3 2 2 3 3 2 3 1 3 2 3 3 1 3 2 1 1 2 1 1 2 1 2 3 3 1 1 2 3 3 2 2 1 3 2 1 3 1 3 3 1 2 3 3 3 1 1 1 2 3 3 3 1 1 1 3 3 3 1 3 1 2 3 1 1 1 1 1 3 1 2 3 1 1 1 2 2 3 2 3 3 2 3 2 3 2 1 3 2 2 2 1 2 3 1 2 3 3 2 2 2 3 1 1 2 1 3 1 3 1 2 3 2 3 3 2 1 2 2 3 1 1 1 2 2 2 1 1 3 3 2 3 3 1 2 2 3 2 1 1 2 1 2 2 2 3 2 3 1 2 2 3 3 1 3 1 1 2 2 3 3 3 3 2 1 1 2 2 3 3 2 2 1 2 3 2 1 3 2 3 3 2 1 3 2 1 3 1 3 2 2 3 3 3 2 2 2 3 1 2 3 1 1 1 2 3 2 1 1 3 2 1 3 2 3 1 3 1 2 3 1 3 2 3 2 3 2 3 1 3 2 1 3 1 1 2 3 1 3 1 2 1 1 3 1 2 1 2 2 1 3 1 2 3 3 2 2 3 1 1 3 1 1 2 3 1 1 2 2 3 3 1 2 2 1 2 2 3 1 3 2 1 1 3 3 2 3 1 1 1 3 3 3 1 3 2 3 3 3 3 2 1 3 2 1 2 2 3 1 1 3 2 3 2 2 2 1 1 1 3 1 1 2 1 3 2 3 2 1 3 2 3 2 2 3 3 1 3 1 2 1 3 3 1 1 3 2 2 1 1 2 3 2 3 1 3 3 2 3 3 3 3 2 2 3 1 3 1 3 3 1 3 3 2 3 3 1 2 2 2 1 1 1 1 1 3 3 1 3 1 3 3 2 3 1 3 1 3 1 1 2 1 1 2 2 3 3 3 3 3 2 2 2 2 3 1 1 1 2 1 2 2 2 3 2 1 2 1 1 3 1 1 3 3 3 1 1 3 1 3 3 2 2 1 3 1 2 1 3 1 3 1 3 1 3 2 1 3 2 3 2 1 3 2 1 1 2 2 2 3 2 2 1 2 2 1 2 3 2 2 1 3 1 3 1 3 2 2 2 2 1 1 2 1 3 3 1 2 3 3 3 1 2 1 3 3 3 1 2 2 2 1 2 1 2 3 1 1 1 3 1 2 2 3 3 1 1 2 1 1 1 2 2 2 2 2 1 3 3 2 2 1 3 2 3 1 3 1 2 3 1 3 2 2 2 3 3 2 1 2 1 1 3 2 3 3 2 3 1 3 3 2 2 1 1 1 1 1 2 3 2 3 2 1 1 2 2 2 3 1 3 2 3 2 1 3 3 2 2 3 3 3 3 2 3 2 2 3 1 2 2 3 2 1 2 3 1 3 2 3 1 3 2 2 1 1 2 2 2 1 2 3 1 1 3 3 1 2 1 1 2 2 1 3 3 3 2 3 3 1 3 3 1 3 2 3 3 2 1 3 3 3 1 3 1 1 1 3 2 1 3 3 3 2 1 3 3 1 3 2 1 3 3 3 2 3 1 2 3 3 3 1 1 3 1 2 2 1 3 3 1 3 3 2 1 3 3 1 2 3 1 1 1 2 3 2 3 1 3 1 1 3 3 3 3 1 1 2 1 2 3 2 2 1 1 1 3 2 3 1 2 1 3 2 3 3 3 2 3 3 3 3 1 1 3 2 2 3 3 1 2 2 1 3 3 2 3 2 3 1 1 3 3 3 3 3 1 3 1 3 2 2 3 2 2 1 3 2 2 3 2 1 2 3 3 3 1 2 1 2 1 3 3 2 1 2 1 2 3 1 3 1 2 3 1 2 2 1 2 1 2 1 2 3 2 2 2 2 2 2 1 3 3 1 3 2 3 1 3 3 1 1 1 2 1 2 1 1 1 3 1 2 3 2 1 2 1 1 2 3 2 2 1 1 1 1 2 1 3 1 2 3 1 2 1 2 1 2 3 2 2 1 1 2 1 3 3 3 2 2 1 3 3 1 1 1 1 1 3 1 2 1 2 3 1 3 3 1 3 3 2 3 3 1 3 1 3 1 1 1 1 3 3 2 1 2 1 3 2 1 3 3 3 1 1 2 1 1 2 3 1 1 2 2 2 1 3 3 3 3 3 1 2 2 2 1 2 2 2 3 2 3 3 2 2 3 2 1 3 3 2 2 3 3 1 2 1 3 3 2 3 3 3 2 1 3 1 2 1 3 1 2 2 2 2 3 1 3 3 2 3 3 1 2 1 2 3 3 1 1 2 1 1 1 2 2 2 1 2 1 3 3 3 3 2 3 1 3 2 1 2 1 2 3 3 3 3 1 2 3 2 2 2 3 2 2 1 2 1 1 3 2 1 1 1 3 2 2 3 2 3 3 1 1 2 3 1 3 1 3 2 1 2 1 2 1 1 2 2 1 1 1 2 2 2 2 2 1 3 3 3 2 2 3 1 3 1 1 3 1 1 2 1 1 3 3 2 2 1 3 3 3 3 1 2 1 1 1 2 1 3 3 2 3 2 3 3 1 3 3 2 1 3 3 2 1 3 3 1 1 1 2 2 3 2 3 2 1 2 3 2 2 1 1 2 2 1 1 2 3 1 3 3 3 3 2 2 2 2 1 1 2 1 3 1 2 2 3 3 1 3 1 2 3 2 2 1 2 3 1 2 3 2 1 2 3 2 1 1 2 2 3 1 1 3 2 2 1 3 2 3 2 1 1 2 1 2 3 3 1 2 3 1 1 2 2 3 2 2 3 1 1 3 1 2 3 1 2 1 1 1 3 1 1 1 2 1 2 1 1 1 1 1 2 1 3 3 1 2 2 3 2 3 2 2 3 1 3 3 2 3 1 3 3 3 3 3 1 3 1 2 3 3 3 1 1 2 3 1 3 1 1 3 1 1 3 2 2 1 3 2 3 3 1 1 1 2 2 3 1 3 2 2 1 1 2 2 3 3 3 3 1 2 2 1 1 3 3 2 1 2 3 1 1 1 1 1 2 1 3 2 1 2 1 3 1 2 2 2 3 1 3 1 2 3 3 3 1 2 3 2 2 3 3 1 3 3 3 1 1 2 1 2 1 1 3 1 3 2 1 2 2 3 1 2 3 2 2 2 2 3 3 1 1 1 2 3 2 3 1 1 1 2 1 2 2 1 2 3 1 3 3 2 1 3 3 1 3 1 1 3 1 3 1 2 3 2 3 2 1 1 2 3 3 3 1 1 3 3 3 1 2 1 2 1 2 1 2 3 3 2 2 3 2 2 2 1 3 3 3 3 1 1 3 3 1 2 2 3 3 2 3 2 2 3 2 2 3 3 2 2 2 2 3 1 1 3 2 1 3 2 3 1 2 1 1 3 2 2 1 3 3 1 3 2 2 1 1 3 1 2 1 1 2 2 2 1 3 1 1 1 2 1 1 3 1 3 1 3 1 3 2 1 2 2 2 3 2 2 3 3 3 3 2 2 3 1 2 1 1 3 2 3 2 2 2 2 2 3 2 1 2 3 3 3 2 2 1 3 1 3 1 1 1 2 3 3 1 1 2 2 1 3 1 3 3 3 1 3 1 2 1 2 3 2 3 3 2 1 2 3 1 3 3 1 2 2 2 1 3 3 3 2 2 1 2 3 2 2 3 3 2 2 2 2 2 2 2 1 3 1 1 1 3 2 2 1 3 2 1 2 2 1 2 1 2 2 1 3 3 3 3 3 1 2 3 1 2 2 3 3 1 1 2 1 3 3 2 1 1 1 3 2 3 3 1 1 2 2 1 3 3 2 2 1 2 2 1 1 1 1 1 2 2 3 2 2 2 2 1 2 3 1 3 2 2 1 3 3 1 3 2 3 2 3 1 3 1 3 2 3 1 1 2 2 2 1 3 1 3 2 2 1 1 2 1 1 3 1 2 2 1 3 3 2 2 2 1 1 1 3 3 2 2 1 2 1 2 1 2 2 1 3 2 2 3 3 2 3 2 3 3 2 2 3 1 2 1 2 2 3 1 2 2 3 1 1 2 1 1 2 1 3 2 2 2 3 3 2 2 2 1 1 3 2 1 2 1 1 1 1 1 3 3 3 1 2 3 2 1 2 3 3 2 1 3 3 2 3 3 1 1 3 3 1 2 1 3 1 3 3 1 3 2 2 2 1 3 2 2 3 1 1 2 3 2 2 3 3 1 2 1 1 3 2 3 3 1 2 1 1 3 2 3 3 2 3 3 2 2 3 2 1 1 3 1 2 3 3 1 3 3 3 3 3 1 2 1 2 3 3 2 1 2 1 1 2 3 2 3 1 2 3 2 1 3 2 3 1 2 3 2 1 3 2 2 3 1 3 2 3 3 2 2 2 1 2 3 2 3 2 1 2 1 3 3 1 1 1 1 2 1 1 3 1 2 1 3 1 2 1 1 3 3 1 2 2 3 3 3 2 3 3 2 1 2 3 1 1 1 3 1 3 2 2 1 1 3 2 3 1 3 2 3 3 1 3 2 3 1 2 2 2 1 2 1 3 1 2 1 3 3 3 3 1 3 2 3 1 1 1 3 1 1 2 1 3 1 2 2 3 3 3 3 2 2 3 2 1 2 3 1 2 2 1 1 1 1 3 3 1 3 1 2 2 3 1 2 3 2 3 2 2 3 3 2 1 1 2 3 1 3 2 3 3 3 2 1 3 1 2 1 1 3 1 3 3 3 1 3 2 3 2 2 2 1 2 1 1 2 3 2 1 1 1 2 3 2 1 1 3 3 2 3 1 1 3 3 3 1 1 1 3 3 2 3 2 1 2 2 3 1 3 1 3 3 3 1 2 1 2 3 3 2 1 3 1 1 1 2 1 3 1 1 1 3 2 2 1 3 2 1 3 1 3 1 3 1 1 3 1 2 3 1 3 3 3 2 2 1 1 2 2 1 3 3 1 3 3 1 1 1 3 2 2 1 2 1 2 1 2 3 3 1 1 3 1 1 3 3 1 1 1 2 3 2 2 1 2 3 3 1 3 2 1 2 1 3 3 1 3 3 2 2 3 1 1 1 1 3 1 1 3 3 2 1 2 2 1 2 3 2 3 2 3 2 2 3 3 3 1 3 2 2 3 3 3 2 3 1 1 3 2 2 2 3 1 2 1 2 3 2 1 2 3 1 2 1 3 2 1 1 1 2 1 3 2 2 1 3 2 1 1 2 2 2 3 2 1 3 3 1 1 1 1 1 1 2 3 2 1 2 1 1 1 3 3 3 1 3 2 3 2 3 1 1 3 3 1 1 3 2 2 1 1 2 1 2 3 1 1 2 1 3 1 1 2 3 2 1 1 2 1 2 1 2 2 3 2 3 3 3 2 3 2 2 2 2 3 2 3 3 1 3 3 2 3 2 1 2 3 2 1 3 3 2 3 3 1 3 2 3 2 2 2 3 3 1 1 2 1 1 1 3 3 1 1 1 2 1 3 1 1 2 3 2 1 1 1 3 3 2 1 2 1 3 3 1 3 2 3 1 1 1 2 3 2 3 1 3 2 3 2 2 3 2 2 3 3 2 1 2 3 3 3 1 2 2 3 2 3 3 2 1 1 2 3 2 1 1 1 3 1 1 1 2 1 1 3 1 1 3 1 1 3 1 2 2 3 2 2 3 2 3 3 2 3 2 1 3 1 2 2 1 1 2 3 1 2 2 1 3 3 3 1 1 3 2 3 3 3 2 2 1 3 1 1 3 2 2 2 1 3 1 1 2 2 1 2 2 1 1 2 1 3 2 3 2 3 2 3 2 3 2 3 2 2 1 3 1 2 1 1 1 2 3 1 2 3 1 1 3 3 3 3 2 2 3 1 2 3 1 2 1 1 1 1 1 1 2 1 3 3 2 3 2 3 1 1 3 2 1 1 2 2 3 1 2 3 1 3 2 3 2 1 1 1 1 3 2 1 1 1 1 1 1 3 1 1 3 1 1 3 3 2 3 3 2 1 3 3 1 2 3 3 2 2 2 3 2 1 3 2 2 2 1 1 2 1 2 2 2 1 1 2 1 1 3 3 2 2 1 2 1 2 1 2 2 1 2 3 2 1 3 2 3 3 1 1 2 2 1 3 3 3 2 2 1 2 2 2 3 2 1 1 1 3 3 1 1 2 2 3 3 2 3 1 3 2 3 3 1 1 3 2 2 1 2 1 2 2 3 1 2 1 2 3 2 1 3 3 3 2 2 3 1 2 3 3 2 3 2 1 1 1 2 1 1 3 1 1 2 3 2 2 2 3 3 2 2 2 1 1 2 2 3 1 1 1 2 3 2 2 2 1 2 3 3 1 1 1 3 2 1 3 1 1 3 1 2 3 2 2 2 1 2 1 1 1 3 2 3 1 3 2 1 1 3 2 3 2 1 1 3 1 2 3 3 2 1 3 1 1 2 3 1 2 3 2 3 3 2 1 2 2 2 1 3 2 3 2 1 2 1 2 1 3 2 1 1 1 3 3 2 2 3 1 3 2 1 1 3 3 1 3 3 1 3 2 3 3 1 2 1 2 1 3 1 1 1 3 1 1 3 2 2 2 3 1 2 2 1 2 3 2 1 2 1 1 2 1 1 1 1 3 2 3 1 1 3 1 2 1 1 1 3 3 2 3 1 2 2 2 2 1 1 3 3 3 2 2 1 2 2 3 1 1 1 2 1 3 1 1 2 1 3 2 2 1 1 2 3 3 3 3 2 2 2 2 1 2 1 3 2 2 3 1 1 2 1 3 1 2 1 3 1 1 2 1 1 3 2 2 2 2 2 1 1 1 2 1 2 3
echo 'get'
naivemask=. has__naivedict"keyrank keys
jhasans=. has__mydict keys
assert. jhasans -: naivemask
'get'dumpchk mydict
if. -. valshape -: 0 do.
  fillatom=. {. valuetype__mydict c. ''
  jgetans=. (valshape $ fillatom) get__mydict keys
  jmask=. +./@,"valrank ] fillatom ~: jgetans
  assert. jmask -: naivemask
  naivegetans=. get__naivedict"keyrank (, naivemask) # (_ , keyshape) ($ ,) keys
  if. 1 -: +./ , naivemask do.
    assert. naivegetans -: (, jmask) # (_ , valshape) ($ ,) jgetans
  end.
end.
NB. Delete.
batchshapefordel=. <. -: batchshape
keys=. 2 12 3 2$1 0 1 1 1 0 1 0 0 1 1 0 1 1 1 0 0 1 0 0 1 1 1 1 0 0 1 0 1 0 0 1 1 0 1 1 0 1 1 1 1 0 0 1 1 0 0 0 0 1 0 1 0 0 1 1 1 1 1 0 1 0 0 1 1 0 0 1 0 0 1 1 0 1 1 1 1 1 0 0 1 0 0 1 1 1 1 1 0 0 1 0 0 0 0 1 1 1 1 0 0 0 0 1 1 0 0 1 0 1 0 1 0 1 1 1 0 0 0 0 1 0 0 0 0 0 0 1 1 0 0 0 0 0 1 1 1 1 0 1 0 0 1 0
echo 'delete'
naivemask=. has__naivedict"keyrank keys
del__naivedict"keyrank^:([: -. (0 e. $)) keys
jdelans=. del__mydict keys
'del'dumpchk mydict
echo 'count mydict ',": count__mydict ''
echo 'count naivedict ',": count__naivedict ''
assert. (count__mydict '') -: count__naivedict ''
echo 'count ok'
assert. jdelans -: naivemask *. batchshapefordel ($ ,) ~:&.|. (_ , keyshape) ($ ,) keys
echo 'jdelans ok'
destroy__naivedict ''
destroy__mydict ''
echo 'finish test_type'
EMPTY
}}"0 'tree concurrent';'tree'


9!:37 c1

epilog''

